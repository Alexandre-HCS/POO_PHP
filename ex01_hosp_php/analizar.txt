<?php
class Funcionario {
    private $cpf;
    public $nome;
    public $idade;
    public $cargo;
    public $atividade;

    public function __construct($nome, $idade, $cpf, $cargo, $atividade) {
        $this->nome = $nome;
        $this->idade = $idade;
        $this->cpf = $cpf;
        $this->cargo = $cargo;
        $this->atividade = $atividade;
    }

    public function verCpf($visivel) {
        return $visivel ? $this->cpf : '***.***.***-**';
    }

    public function getCpfReal() {
        return $this->cpf;
    }
}

class Medico extends Funcionario {
    public function __construct($nome, $idade, $cpf) {
        parent::__construct($nome, $idade, $cpf, 'Médico', 'Atende pacientes em consultório.');
    }
}

class Enfermeiro extends Funcionario {
    public function __construct($nome, $idade, $cpf) {
        parent::__construct($nome, $idade, $cpf, 'Enfermeiro', 'Presta cuidados diretos aos pacientes.');
    }
}

class Recepcionista extends Funcionario {
    public function __construct($nome, $idade, $cpf) {
        parent::__construct($nome, $idade, $cpf, 'Recepcionista', 'Atende as ligações e marca consultas.');
    }
}

class Cirurgiao extends Funcionario {
    public function __construct($nome, $idade, $cpf) {
        parent::__construct($nome, $idade, $cpf, 'Cirurgião', 'Realiza cirurgias para salvar vidas.');
    }
}

class Socorrista extends Funcionario {
    public function __construct($nome, $idade, $cpf) {
        parent::__construct($nome, $idade, $cpf, 'Socorrista', 'Presta primeiros socorros em emergências.');
    }
}

class Limpeza extends Funcionario {
    public function __construct($nome, $idade, $cpf) {
        parent::__construct($nome, $idade, $cpf, 'Funcionário da Limpeza', 'Cuida da higiene do ambiente hospitalar.');
    }
}

class Diretor extends Funcionario {
    public function __construct($nome, $idade, $cpf) {
        parent::__construct($nome, $idade, $cpf, 'Diretor', 'Coordena todas as operações da clínica.');
    }
}

$funcionarios = [
    new Medico('Luciano', 40, '123.321.456-11'),
    new Enfermeiro('Juliana', 30, '987.654.432-22'),
    new Recepcionista('Carla', 25, '654.321.987-33'),
    new Cirurgiao('Renato', 45, '789.123.654-44'),
    new Socorrista('Paula', 33, '321.654.987-55'),
    new Limpeza('Luiz', 50, '852.951.753-66'),
    new Diretor('Ana', 55, '741.852.963-77')
];

$cpfVisivel = isset($_GET['cpfVisivel']) ? filter_var($_GET['cpfVisivel'], FILTER_VALIDATE_BOOLEAN) : false;
?>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Funcionários</title>
</head>
<body>
    <button onclick="toggleCpf()">Alternar Visibilidade do CPF</button>
    <table border="1">
        <thead>
            <tr>
                <th>Cargo</th>
                <th>Nome</th>
                <th>Idade</th>
                <th>CPF</th>
                <th>Atividade</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($funcionarios as $func): ?>
                <tr>
                    <td><?= htmlspecialchars($func->cargo) ?></td>
                    <td><?= htmlspecialchars($func->nome) ?></td>
                    <td><?= htmlspecialchars($func->idade) ?> anos</td>
                    <td><?= htmlspecialchars($func->verCpf($cpfVisivel)) ?></td>
                    <td><?= htmlspecialchars($func->atividade) ?></td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
    
    <script>
        function toggleCpf() {
            let cpfVisivel = <?= json_encode(!$cpfVisivel) ?>;
            window.location.href = "?cpfVisivel=" + cpfVisivel;
        }
    </script>
</body>
</html>
